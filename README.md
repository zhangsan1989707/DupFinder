# 视频文件智能查重工具 (DupFinder)

一款基于图形化界面的智能视频查重工具，能够识别内容相同但经过转码、剪辑、缩放或编辑的重复视频文件。

## 功能特点

- **智能识别**: 使用内容感知哈希技术，超越传统的文件名和大小比较
- **多格式支持**: 支持 MP4, AVI, MKV, MOV, WMV, FLV 等常见视频格式
- **灵活处理**: 提供多种选择策略和安全的文件处理选项
- **用户友好**: 直观的图形界面，支持拖拽添加路径
- **安全可靠**: 默认移动到回收站，支持备份功能

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
python test_app.py
```

或者直接运行：

```bash
python src/main.py
```

## 使用方法

1. **添加扫描路径**: 点击"添加路径"按钮或拖拽文件夹到路径列表
2. **调整设置**: 设置相似度阈值（默认80%）
3. **开始扫描**: 点击"开始扫描"按钮
4. **查看结果**: 扫描完成后查看重复文件分组
5. **选择处理**: 使用选择策略或手动选择要保留的文件
6. **执行处理**: 点击"执行处理"按钮处理重复文件

## 选择策略

- **保留最大分辨率**: 自动选择分辨率最高的视频
- **保留最小大小**: 自动选择文件大小最小的视频
- **保留最新文件**: 自动选择修改时间最新的视频
- **保留最旧文件**: 自动选择修改时间最旧的视频
- **手动选择**: 用户自行勾选要保留的文件

## 处理方式

- **移动到回收站**: 默认安全选项，可恢复
- **移动到备份文件夹**: 移动到指定的备份目录
- **永久删除**: 直接删除文件（谨慎使用）

## 技术实现

- **GUI框架**: PyQt5
- **视频处理**: OpenCV
- **特征提取**: 感知哈希 (imagehash)
- **文件处理**: send2trash (安全删除)

## 项目结构

```
DupFinder/
├── src/
│   ├── main.py              # 应用程序入口
│   ├── gui/                 # GUI组件
│   │   ├── main_window.py   # 主窗口
│   │   └── settings_dialog.py # 设置对话框
│   ├── scanner/             # 文件扫描
│   │   └── video_scanner.py
│   ├── detector/            # 重复检测
│   │   └── duplicate_detector.py
│   ├── processor/           # 文件处理
│   │   └── file_processor.py
│   └── utils/               # 工具类
│       └── config.py        # 配置管理
├── requirements.txt         # 依赖列表
├── test_app.py             # 测试启动脚本
└── README.md               # 说明文档
```

## 系统要求

- Python 3.7+
- Windows/macOS/Linux
- 足够的内存处理大型视频文件

## 注意事项

- 首次扫描大量视频文件可能需要较长时间
- 建议在处理前备份重要文件
- 相似度阈值设置过低可能产生误判

## 开发计划

- [ ] 添加视频预览功能
- [ ] 支持更多视频格式
- [ ] 优化大文件处理性能
- [ ] 添加批量重命名功能
- [ ] 支持图片查重功能